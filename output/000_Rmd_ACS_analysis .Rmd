---
title: "000_ACS_analysis"
author: "Yanjin Li"
date: "September 15, 2016"
output: html_document
---

```{r setup, include=FALSE}

# STEP 0. Package Setup and Initialization ========================================================================
library(RMySQL)
library(dplyr)

# Check which user is running the script
user <- Sys.getenv("HOME")

# SET YOUR LOCAL WORKING DIRECTORY HERE 
# pwd <- ...

if (user == "/Users/yanjin.li"){
  # Set working directory
  setwd("/Users/yanjin1993/Google Drive/Columbia University /2016 Fall /Applied Data Science /001 Project")
  # Set local saving directory
  save.path <- "/export_dataframes"
} else {
  
  # Set working directory
  #setwd(pwd)
  # Set local saving directory
  # save.path <- "/export_dataframes"
}
```

## Variable Reference 

* __SENARIO__: Housing unit/GQ person serial number 
* __PUMA__: Public use microdata area code 
* __ST__: State code 
* __JWMNP__: Travel time to work 
* __JWTR__: Means of transportation to work 
* __INDP__: Industry recode for 2013 and later based on 2012 IND codes 
* __JWAP__: Time of arrival at work - hour and minute 
* __PINCP__: Total person's income (signed)


```{r cars}
# STEP 1. Data Manipulation and Processing ========================================================================



load("original_dataframes/1.RData", envir = parent.frame(), verbose = FALSE)
# Load IDNP (job description data) 
datraw.INDP2013 <- read.csv("original_dataframes/INDP_dict_2013.csv", colClasses = "character",  = FALSE)
INDP.dict.2013 <- datraw.INDP2013 %>% 
  mutate(INDP = as.integer(substr(V1, 1, 4)), industry = substr(V1, 7, 9),
         occupation = substr(V1, 7, 1000000L)) %>%
  select(-V1)

datclean.ASC <- as.data.frame(pop) %>% left_join(INDP.dict.2013)

# Make a copy to original df 
dat.acs <- pop

# Generate a column with state names based on codes 
ST <- c(1, 2, 4:6, 8:13, 15:42, 44:51, 53:56, 72)
ST.code <- c("AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FL", "GA", "HI", 
             "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MD", "MA", "MI", "MN",
             "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH",
             "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA",
             "WV", "WI", "WY", "PR")
dat.code <- data.frame(ST, ST.code)
# Save to local
write.csv(dat.code, "exported_dataframes/code_data.csv")



```



```


## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
